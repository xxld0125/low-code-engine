# 实施计划

## 第一阶段：基础与编辑器核心 (第 1 周)

### 1.1 项目初始化

- [ ] 初始化 Next.js 项目，集成 Supabase & shadcn/ui (已完成)。
- [ ] 设置数据库 Schema (`pages` 表)。
- [ ] 配置 RLS 策略。

### 1.2 编辑器状态管理

- [ ] 实现 `useEditorStore` (Zustand)。
- [ ] 定义组件节点 Schema。
- [ ] 实现 Store 中的添加/移除/选中/移动逻辑。
- [ ] 实现复制/粘贴逻辑 (剪贴板状态)。

### 1.3 基础编辑器 UI

- [ ] 创建布局：侧边栏 (左), 画布 (中), 属性面板 (右)。
- [ ] 使用 `dnd-kit` 实现拖拽功能。
  - [ ] 可拖拽的侧边栏项目。
  - [ ] 可放置的画布区域。
  - [ ] 可排序的子元素 (重新排序)。

---

## 第二阶段：组件系统与属性配置 (第 2 周)

### 2.1 基础组件

- [ ] 实现 `Container`, `Flex`, `Grid`。
- [ ] 实现 `Text`, `Button`。
- [ ] 创建组件注册表 (映射类型字符串到 React 组件)。

### 2.2 属性面板

- [ ] 基于选中组件类型创建通用的属性表单。
- [ ] 实现样式控制 (内边距, 外边距, 对齐)。
- [ ] 实现内容控制 (文本, 链接)。

### 2.3 持久化

- [ ] 实现"保存"按钮逻辑 (保存 Schema 到 Supabase)。
- [ ] 实现页面加载 (获取 Schema 并渲染)。

---

## 第三阶段：数据与业务组件 (第 3 周)

### 3.1 Supabase 集成

- [ ] 创建工具函数以从 Supabase 获取表列表和 Schema。
- [ ] 实现数据绑定表达式解析器 (`{{...}}`)。

### 3.2 表格组件 (Table)

- [ ] 构建 `Table` 组件。
- [ ] 属性：选择数据表源。
- [ ] 属性：配置列。
- [ ] 逻辑：获取并显示数据。

### 3.3 表单组件 (Form)

- [ ] 构建 `Form` 组件。
- [ ] 逻辑：从表 Schema 自动生成字段。
- [ ] 逻辑：处理提交动作。

---

## 第四阶段：交互与完善 (第 4 周)

### 4.1 交互系统

- [ ] 实现动作处理器 (打开模态框, 提交, 刷新等)。
- [ ] 将动作绑定到事件 (例如：按钮 `onClick`)。

### 4.2 反馈与错误处理

- [ ] 集成 `sonner` 用于 Toast 提示。
- [ ] 优雅地处理 Supabase 错误。

### 4.3 最终评审

- [ ] 验证所有 MVP 需求。
- [ ] 检查设计规范符合度。
- [ ] 演示"用户管理"页面的创建流程。
