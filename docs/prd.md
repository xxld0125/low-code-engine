# 低代码引擎产品需求文档 (PRD)

## 1. 概述

### 1.1 产品愿景

一个专为**前端工程师**设计的低代码平台，旨在利用现有的 UI 组件和 Supabase 基础设施快速构建**PC 端后台管理系统**。它在开发效率与代码增强的灵活性之间取得了平衡。

### 1.2 目标用户

- **主要用户**：前端工程师。
- **核心需求**：快速构建 CRUD 页面，减少重复性工作，同时在必要时保留代码级的控制能力。

### 1.3 核心价值主张

- **速度**：通过拖拽界面快速组装 UI。
- **集成**：深度集成 Supabase，提供即时的后端能力。
- **一致性**：严格遵循设计规范 (`DesignStyleGuide.md`)。

---

## 2. 功能需求

### 2.0 平台页面规划

平台本身包含以下核心页面：

1.  **仪表盘 (Dashboard)**
    - 路由：`/dashboard`
    - 功能：展示用户创建的所有页面列表，提供新建、编辑、删除、预览入口。
2.  **编辑器 (Editor)**
    - 路由：`/editor/:pageId`
    - 功能：核心工作区，进行页面的拖拽搭建和配置。
3.  **运行时预览 (Runtime)**
    - 路由：`/page/:pageId`
    - 功能：解析 Schema 并渲染最终页面，供最终用户访问。

### 2.1 编辑器界面

- **布局**：三栏式布局。
  - **左侧**：组件库 & 组件树。
  - **中间**：画布（实时预览）。
  - **右侧**：属性面板。
- **交互模式**：拖拽 + 代码增强。
- **画布操作**：
  - 选中组件。
  - 删除组件。
  - 拖拽排序。
  - 复制/粘贴组件。
  - 组件树视图。

### 2.2 组件系统

**MVP 组件集**：

1.  **布局类**：容器 (Container)、弹性布局 (Flex)、网格 (Grid)。
2.  **数据展示类**：表格 (Table) —— 支持列配置、数据绑定、前端分页。
3.  **数据录入类**：表单 (Form) —— 根据 Supabase Schema 自动生成，支持文本/数字/日期/布尔输入，简单验证。
4.  **基础类**：按钮 (Button)、文本 (Text)。

**样式规范**：

- 严格遵循 `DesignStyleGuide.md`。
- MVP 阶段**禁止**自定义颜色/字体。
- 仅允许配置布局属性（内边距、外边距、对齐方式）。

### 2.3 数据管理

- **数据源**：深度集成 Supabase。
- **工作流**：连接现有的 Supabase 数据表（读取 Schema）。
- **数据绑定**：
  - 模板表达式：`{{user.name}}`, `{{row.status === 'active' ? '已激活' : '未激活'}}`。
  - 可用上下文：`user` (用户信息), `row` (行数据), `pageParams` (页面参数)。

### 2.4 页面属性与发布

- **模式**：独立页面模式（每个页面对应唯一的 Runtime URL）。
- **导航限制 (MVP)**：不提供全局导航栏 (Global Navbar) 或侧边栏 (Sidebar) 配置。每个页面均为独立渲染，如需导航需在页面内手动添加链接组件。
- **路由结构**：生成的页面使用扁平路由 `/page/:pageId`。
- **编辑体验**：所见即所得（Editor 画布渲染效果与 Runtime 页面完全一致）。
- **保存机制**：手动点击保存按钮将当前配置持久化到数据库。

### 2.5 交互与逻辑

- **预设动作**：
  1.  打开模态框 (Open Modal)。
  2.  关闭模态框 (Close Modal)。
  3.  提交表单 (Submit Form) —— 提交到 Supabase。
  4.  刷新表格 (Refresh Table)。
  5.  页面跳转 (Navigate)。
  6.  显示提示 (Show Toast) —— 成功/错误消息。
- **错误处理**：简单的 Toast 通知 (Sonner)。

### 2.6 权限管理

- **MVP**：单用户模式。
- **安全性**：依赖 Supabase RLS (行级安全策略)。

### 2.7 设备支持

- **目标设备**：仅限 PC 桌面端 (最小宽度 1280px)。
- **响应式**：MVP 阶段不考虑响应式适配。

---

## 3. 非功能需求

- **性能**：画布操作应流畅 (60fps)。
- **可靠性**：数据保存必须原子化且可靠。
- **技术栈**：Next.js 15, Supabase, Tailwind CSS, shadcn/ui, dnd-kit, Zustand。

---

## 4. 成功指标 (MVP)

- 开发者可以在 10 分钟内构建一个功能完整的"用户管理"页面（包含列表、新增、编辑、删除功能）。
